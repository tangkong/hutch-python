

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Debug &mdash; hutch-python 0.6.0+42.g9da2b3d documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Release History" href="releases.html" />
    <link rel="prev" title="Yaml Files" href="yaml_files.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> hutch-python
          

          
          </a>

          
            
            
              <div class="version">
                0.6.0+42.g9da2b3d
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="start.html">Starting a Session</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">What to Expect When You are Expecting a New Hutch Python</a></li>
</ul>
<p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="startup.html">Startup Sequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="daq.html">DAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="beamline.html">Beamline File</a></li>
<li class="toctree-l1"><a class="reference internal" href="experiment.html">Experiment File</a></li>
<li class="toctree-l1"><a class="reference internal" href="presets.html">Presets</a></li>
<li class="toctree-l1"><a class="reference internal" href="report.html">Reporting Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips and Tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_utils.html">Useful Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="other_modules.html">Related Modules</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="environment.html">Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="hutch_setup.html">Hutch Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="yaml_files.html">Yaml Files</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Debug</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#live-session-logging">Live Session Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debug-mode">Debug Mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="#automated-test-logging">Automated Test Logging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Release History</a></li>
</ul>
<p class="caption"><span class="caption-text">Internal API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bug.html">bug.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">cache.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">cli.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="ipython_log.html">ipython_log.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="load_conf.html">load_conf.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="load_parts.html">load submodules</a></li>
<li class="toctree-l1"><a class="reference internal" href="log_setup.html">log_setup.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="namespace.html">namespace.py</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">utils.py</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hutch-python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Debug</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/debug.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="debug">
<h1>Debug<a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h1>
<p>There are numerous debug features built in to <code class="docutils literal notranslate"><span class="pre">hutch-python</span></code>.</p>
<div class="section" id="live-session-logging">
<h2>Live Session Logging<a class="headerlink" href="#live-session-logging" title="Permalink to this headline">¶</a></h2>
<p>The first place to go when something has already gone wrong is to the log
files. These are stored in a <code class="docutils literal notranslate"><span class="pre">logs</span></code> directory in the same location as the
<code class="docutils literal notranslate"><span class="pre">conf.yml</span></code> file, and sorted by date and session start time.</p>
<p>These contain every log message from the session in the order they were called.
Each module can choose when to make calls to <code class="docutils literal notranslate"><span class="pre">logger.debug</span></code> to generate
log messages, but we also log every single input line, output line, and
exception that was raised in the interactive session. Note that the input and
output lines are not available to the logger until the entire command has
executed, so the log messages immediately preceding an input log are those
that were created by calling that statement.</p>
<p>The logging configuration is specified by the <code class="docutils literal notranslate"><span class="pre">logging.yaml</span></code> file and is
set up by the <code class="xref py py-mod docutils literal notranslate"><span class="pre">log_setup</span></code> module. If not in debug mode, only log levels
<code class="docutils literal notranslate"><span class="pre">INFO</span></code> and above will make it to the terminal. The files are configured to
rotate and roll over into a second file once they get too large.</p>
</div>
<div class="section" id="debug-mode">
<h2>Debug Mode<a class="headerlink" href="#debug-mode" title="Permalink to this headline">¶</a></h2>
<p>You can start in debug mode by passing the <code class="docutils literal notranslate"><span class="pre">--debug</span></code> option to
<code class="docutils literal notranslate"><span class="pre">hutch-python</span></code>. Debug mode changes the logging configuration to print
log messages of level <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code> and above to the screen.
Within every session, we have a few hidden objects for managing the
state of debug mode.</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><a class="reference internal" href="generated/hutch_python.log_setup.debug_mode.html#hutch_python.log_setup.debug_mode" title="hutch_python.log_setup.debug_mode"><code class="xref any py py-func docutils literal notranslate"><span class="pre">_debug_mode</span></code></a>:</dt>
<dd>Used to enable, disable, or check the state of debug mode.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="generated/hutch_python.log_setup.debug_context.html#hutch_python.log_setup.debug_context" title="hutch_python.log_setup.debug_context"><code class="xref any py py-func docutils literal notranslate"><span class="pre">_debug_context</span></code></a>:</dt>
<dd>Context manager for enabling debug mode for a block of code.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="generated/hutch_python.log_setup.debug_wrapper.html#hutch_python.log_setup.debug_wrapper" title="hutch_python.log_setup.debug_wrapper"><code class="xref any py py-func docutils literal notranslate"><span class="pre">_debug_wrapper</span></code></a>:</dt>
<dd>Wrapper for enabling debug mode for the execution of a single
function.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="generated/hutch_python.log_setup.set_console_level.html#hutch_python.log_setup.set_console_level" title="hutch_python.log_setup.set_console_level"><code class="xref any py py-func docutils literal notranslate"><span class="pre">_debug_console_level</span></code></a>:</dt>
<dd>Utility function for setting the console’s logging level to an
arbitrary value.</dd>
</dl>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">_debug_mode</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>     <span class="c1"># Turn on debug mode</span>
<span class="n">_debug_mode</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>    <span class="c1"># Turn off debug mode</span>
<span class="k">print</span><span class="p">(</span><span class="n">_debug_mode</span><span class="p">())</span>  <span class="c1"># Check debug mode</span>

<span class="c1"># Turn on debug mode for the duration of a code block</span>
<span class="k">with</span> <span class="n">_debug_context</span><span class="p">():</span>
    <span class="n">buggy_function</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span>

<span class="c1"># Turn on debug mode for one function call</span>
<span class="n">_debug_wrapper</span><span class="p">(</span><span class="n">buggy_function</span><span class="p">,</span> <span class="n">arg</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="automated-test-logging">
<h2>Automated Test Logging<a class="headerlink" href="#automated-test-logging" title="Permalink to this headline">¶</a></h2>
<p>If you’re running the automated test suite, each test run is stored in a
module-level <code class="docutils literal notranslate"><span class="pre">logs</span></code> folder. This can be useful for diagnosing why the tests
are failing.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="releases.html" class="btn btn-neutral float-right" title="Release History" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="yaml_files.html" class="btn btn-neutral" title="Yaml Files" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright .

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.6.0+42.g9da2b3d',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>